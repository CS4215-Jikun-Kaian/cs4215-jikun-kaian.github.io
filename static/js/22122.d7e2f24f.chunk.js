"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[22122],{22657:(e,t,n)=>{n.d(t,{m:()=>a});var s=n(53573),r=n(49639);function a(e){const t=s.Z.parse(e);for(const[n,s]of Object.entries(t))(0,r.isArray)(s)?t[n]=s.join(","):null===s&&delete t[n];return t}},22122:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>Re,default:()=>Ne,handleHash:()=>ke});var s=n(39997),r=n(95725),a=n(65675),o=n(41418),i=n.n(o),l=n(42543),c=n(763),d=n(4235),u=n(72791),h=n(37325),p=n(78687),m=n(57689),g=n(94500),y=n(60341),x=n(97767),b=n(90362),v=n(13152),f=n(89702),S=n(5136),C=n(95134),E=n(32881),j=n(60363),w=n(60054),L=n(89360),T=n(27156),k=n(20535),_=n(32183),R=n(97267),N=n(80184);const F=e=>(0,N.jsx)(k.u,{content:"Execution Time",placement:_.Ly.TOP,children:(0,N.jsx)(R.A,{leftIcon:r.d.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var I=n(51002),D=n(16499),P=n(14634),U=n(78096),B=n(78029),V=n(17862),M=n(9631);class A extends u.PureComponent{constructor(e){super(e),this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=u.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?(0,N.jsx)(I.x,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,N.jsxs)("div",{children:[(0,N.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,N.jsx)(k.u,{content:"Copy link to clipboard",children:(0,N.jsx)(B,{text:this.props.queryString,children:(0,N.jsx)(V.Z,{icon:r.d.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,N.jsx)(N.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,N.jsxs)("div",{children:[(0,N.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,N.jsx)(k.u,{content:"Copy link to clipboard",children:(0,N.jsx)(B,{text:this.props.shortURL,children:(0,N.jsx)(V.Z,{icon:r.d.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,N.jsx)("div",{children:(0,N.jsx)(D.t,{description:"Generating Shareable Link...",icon:(0,N.jsx)(P.$,{size:P.E.SMALL})})}):(0,N.jsxs)("div",{children:[M.Z.urlShortenerBase,"\xa0",(0,N.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,N.jsx)(V.Z,{label:"Get Link",icon:r.d.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,N.jsx)(U.J,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,N.jsx)(k.u,{content:"Get shareable link",placement:_.Ly.TOP,children:(0,N.jsx)(V.Z,{label:"Share",icon:r.d.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}var H=n(42441),O=n(27448),G=n(77640),z=n(67643),$=n.n(z);const q="FileSystemView_file-system-view-container__jISZG",Y="FileSystemView_file-system-view-error__SrF6Z",Z="FileSystemView_file-system-view-empty-space__KfVv+",J="FileSystemView_file-system-view-list-container__9O+ym",K="FileSystemView_file-system-view-spinner__YBPGb",W="FileSystemView_file-system-view-directory-node-container__ya2Av",X="FileSystemView_file-system-view-node-container__GN6ql",Q="FileSystemView_file-system-view-input__r+WEl",ee="FileSystemView_file-system-view-file-name__-PCmg";var te=n(79637),ne=n(83236),se=n(63882),re=n(23797);const ae="ContextMenu_context-menu__FXXlu",oe="ContextMenu_context-menu-item__c2H+Q",ie=({children:e,className:t,createNewFile:n,createNewDirectory:r,open:a,rename:o,remove:l})=>{const[c,d]=(0,ne.w)(),[h,p]=u.useState({x:0,y:0});return(0,N.jsxs)("div",{className:t,onContextMenu:e=>{e.preventDefault(),p({x:e.clientX,y:e.clientY}),d(!0)},children:[e,(0,N.jsxs)(se.B,{menuClassName:i()(s.TUJ,s.Pyr,ae),...c,anchorPoint:h,onClose:()=>d(!1),children:[n&&(0,N.jsx)(re.s,{className:oe,onClick:n,children:"New File"}),r&&(0,N.jsx)(re.s,{className:oe,onClick:r,children:"New Directory"}),a&&(0,N.jsx)(re.s,{className:oe,onClick:a,children:"Open"}),o&&(0,N.jsx)(re.s,{className:oe,onClick:o,children:"Rename"}),l&&(0,N.jsx)(re.s,{className:oe,onClick:l,children:"Delete"})]})]})},le=({indentationLevel:e})=>{const t={paddingLeft:19*e+"px"};return(0,N.jsx)("div",{style:t})},ce=({children:e,waitInMsBeforeRender:t})=>{const[n,s]=u.useState(!1);return u.useEffect((()=>{const e=setTimeout((()=>s(!0)),t);return()=>clearTimeout(e)}),[t]),n?e:(0,N.jsx)(N.Fragment,{})},de=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:s,isDirectory:r,isEditing:a,setIsEditing:o,refreshDirectory:i})=>{const[l,c]=u.useState(s),d=(0,p.I0)(),h=()=>{o(!1),c(s)};return(0,N.jsxs)(N.Fragment,{children:[a&&(0,N.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Q,value:l,onChange:e=>c(e.target.value),onKeyDown:a=>{if("Enter"===a.key){o(!1);const a=$().join(n,s),u=$().join(n,l);if(a===u)return;t.exists(u,(n=>{n?(0,te.qY)({title:"Unable to rename "+(r?"directory":"file"),contents:(0,N.jsxs)("p",{children:["A file or folder ",(0,N.jsx)("b",{children:l})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>c(s))):t.rename(a,u,(t=>{t&&console.error(t),d(r?(0,f.renameEditorTabsForDirectory)(e,a,u):(0,f.renameEditorTabForFile)(e,a,u)),i()}))}))}else"Escape"===a.key&&h()},onFocus:e=>{const t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:h}),!a&&(0,N.jsx)("div",{className:ee,children:s})]})},ue=({processFileName:e,removePlaceholder:t})=>{const[n,s]=u.useState(""),r=()=>t();return(0,N.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:Q,value:n,onChange:e=>s(e.target.value),onKeyDown:s=>{"Enter"===s.key?(e(n),t()):"Escape"===s.key&&r()},onBlur:r})},he=({workspaceLocation:e,fileSystem:t,basePath:n,directoryName:s,indentationLevel:a,refreshParentDirectory:o})=>{const i=$().join(n,s),[l,c]=u.useState(!1),[d,h]=u.useState(!1),[m,g]=u.useState(!1),[y,x]=u.useState(!1),[b,v]=u.useState(0),S=(0,p.I0)(),C=()=>v((b+1)%2);return(0,N.jsxs)("div",{className:W,children:[(0,N.jsx)(ie,{createNewFile:()=>{c(!0),g(!0)},createNewDirectory:()=>{c(!0),x(!0)},rename:()=>h(!0),remove:()=>{(0,te.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${s}' and its contents?`,contents:(0,N.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((n=>{n&&(S((0,f.removeEditorTabsForDirectory)(e,i)),(0,O.EY)(t,i).then(o))}))},children:(0,N.jsxs)("div",{className:X,onClick:()=>{d||c(!l)},children:[(0,N.jsx)(le,{indentationLevel:a}),l&&(0,N.jsx)(G.I,{icon:r.d.CHEVRON_DOWN}),!l&&(0,N.jsx)(G.I,{icon:r.d.CHEVRON_RIGHT}),(0,N.jsx)(de,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:s,isDirectory:!0,isEditing:d,setIsEditing:h,refreshDirectory:o})]})}),m&&(0,N.jsxs)("div",{className:X,children:[(0,N.jsx)(le,{indentationLevel:a+1}),(0,N.jsx)(G.I,{icon:r.d.DOCUMENT}),(0,N.jsx)(ue,{processFileName:e=>{const r=$().join(n,s,e);t.exists(r,(n=>{n?(0,te.qY)({title:"Unable to create file",contents:(0,N.jsxs)("p",{children:["A file or folder ",(0,N.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):t.writeFile(r,"",(e=>{e&&console.error(e),C()}))}))},removePlaceholder:()=>g(!1)})]}),y&&(0,N.jsxs)("div",{className:X,children:[(0,N.jsx)(le,{indentationLevel:a+1}),(0,N.jsx)(G.I,{icon:r.d.CHEVRON_RIGHT}),(0,N.jsx)(ue,{processFileName:e=>{const r=$().join(n,s,e);t.exists(r,(n=>{n?(0,te.qY)({title:"Unable to create directory",contents:(0,N.jsxs)("p",{children:["A file or folder ",(0,N.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):t.mkdir(r,777,(e=>{e&&console.error(e),C()}))}))},removePlaceholder:()=>x(!1)})]}),l&&(0,N.jsx)(me,{workspaceLocation:e,fileSystem:t,basePath:i,indentationLevel:a+1},b)]})},pe=({workspaceLocation:e,fileSystem:t,basePath:n,fileName:s,indentationLevel:a,refreshDirectory:o})=>{const[i,l]=u.useState(!1),c=(0,p.I0)(),d=$().join(n,s),h=()=>{t.readFile(d,"utf-8",((t,n)=>{if(t&&console.error(t),void 0===n)throw new Error("File contents are undefined.");c((0,f.addEditorTab)(e,d,n))}))};return(0,N.jsx)(ie,{open:h,rename:()=>l(!0),remove:()=>{(0,te.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${s}'?`,contents:(0,N.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((n=>{n&&t.unlink(d,(t=>{t&&console.error(t),c((0,f.removeEditorTabForFile)(e,d)),o()}))}))},children:(0,N.jsxs)("div",{className:X,onClick:e=>{2===e.detail&&h()},children:[(0,N.jsx)(le,{indentationLevel:a}),(0,N.jsx)(G.I,{icon:r.d.DOCUMENT}),(0,N.jsx)(de,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:s,isDirectory:!1,isEditing:i,setIsEditing:l,refreshDirectory:o})]})})},me=({workspaceLocation:e,fileSystem:t,basePath:n,indentationLevel:s})=>{const[r,a]=u.useState(void 0),[o,i]=u.useState(void 0),l=()=>{t.readdir(n,(async(e,s)=>{if(e&&console.error(e),void 0===s)return;const r=[],o=[];await Promise.all(s.map((e=>{const s=$().join(n,e);return new Promise(((n,a)=>{t.lstat(s,((t,s)=>{if(t)return a(t);void 0!==s&&(s.isFile()?r.push(e):s.isDirectory()&&o.push(e),n(s))}))}))}))),i(r.sort()),a(o.sort())}))};return u.useEffect(l,[t,n]),o&&r?(0,N.jsxs)("div",{className:J,children:[r.map((r=>(0,N.jsx)(he,{workspaceLocation:e,fileSystem:t,basePath:n,directoryName:r,indentationLevel:s,refreshParentDirectory:l},r))),o.map((r=>(0,N.jsx)(pe,{workspaceLocation:e,fileSystem:t,basePath:n,fileName:r,indentationLevel:s,refreshDirectory:l},r)))]}):(0,N.jsx)(ce,{waitInMsBeforeRender:200,children:(0,N.jsx)(P.$,{className:K,size:P.E.SMALL})})},ge=({workspaceLocation:e,basePath:t})=>{const n=(0,b.ix)((e=>e.fileSystem.inBrowserFileSystem)),[s,a]=u.useState(!1),[o,i]=u.useState(!1),[l,c]=u.useState(0),d=()=>c((l+1)%2);if(null===n)return(0,N.jsx)("div",{className:Y,children:"Unable to load file system."});return(0,N.jsxs)("div",{className:q,children:[(0,N.jsx)(me,{workspaceLocation:e,fileSystem:n,basePath:t,indentationLevel:0},l),s&&(0,N.jsxs)("div",{className:X,children:[(0,N.jsx)(le,{indentationLevel:0}),(0,N.jsx)(G.I,{icon:r.d.DOCUMENT}),(0,N.jsx)(ue,{processFileName:e=>{const s=$().join(t,e);n.exists(s,(t=>{t?(0,te.qY)({title:"Unable to create file",contents:(0,N.jsxs)("p",{children:["A file or folder ",(0,N.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.writeFile(s,"",(e=>{e&&console.error(e),d()}))}))},removePlaceholder:()=>a(!1)})]}),o&&(0,N.jsxs)("div",{className:X,children:[(0,N.jsx)(le,{indentationLevel:0}),(0,N.jsx)(G.I,{icon:r.d.CHEVRON_RIGHT}),(0,N.jsx)(ue,{processFileName:e=>{const s=$().join(t,e);n.exists(s,(t=>{t?(0,te.qY)({title:"Unable to create directory",contents:(0,N.jsxs)("p",{children:["A file or folder ",(0,N.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.mkdir(s,777,(e=>{e&&console.error(e),d()}))}))},removePlaceholder:()=>i(!1)})]}),(0,N.jsx)(ie,{className:Z,createNewFile:()=>a(!0),createNewDirectory:()=>i(!0)})]})};var ye=n(45686),xe=n(39215);const be=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${M.y.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${M.y.sourceHotkeys}).\n\n`,ve=(e,t)=>"\nWelcome to the Source Academy playground stripped down for a CS4215 project!\n\nYou can run basic Go programs right here in your browser based on our virtual machine implementation of Go. "+((e,t)=>{if(e===l.Chapter.FULL_JS)return`However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](${M.y.ecmaScript_2021}).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing \`F12\`) before using breakpoints.`;if(e===l.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";const n=`${M.y.sourceDocs}source_${e}${t!==l.Variant.DEFAULT&&t!==l.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,C.w$)(e,t)}_](${n}).`})(e,t)+be,fe=e=>{return t=e.chapter,n=e.variant,ve(t,n);var t,n};var Se=n(90713),Ce=n(22657),Ee=n(32070),je=n(18465),we=n(62629),Le=n(78922);const Te={goGreen:"h u l k"};async function ke(e,t,n,s,r){var a;const o=(0,Ce.m)(e),i=null!==(a=(0,Se.GA)(o.chap))&&void 0!==a?a:void 0;if(i===l.Chapter.FULL_JS)(0,v.oO)();else if(i===l.Chapter.FULL_TS)(0,v.Ze)();else{var c,u,h,p;if(i===l.Chapter.HTML){if(!await(0,v.zZ)())return}const e=void 0===o.prgrm?"":(0,d.decompressFromEncodedURIComponent)(o.prgrm),a=(0,C.CL)(n),m=void 0===o.files?{[a]:e}:(0,Ce.m)((0,d.decompressFromEncodedURIComponent)(o.files));null!==r&&await(0,O.c2)(n,r,m),s((0,f.setFolderMode)(n,!1));const g=null!==(c=(0,Se.YF)(o.isFolder))&&void 0!==c&&c;s((0,f.setFolderMode)(n,g));const y=null!==(u=null===(h=o.tabs)||void 0===h?void 0:h.split(",").map(d.decompressFromEncodedURIComponent))&&void 0!==u?u:[a];s((0,f.removeEditorTabsForDirectory)(n,we.z[n])),y.forEach((e=>{var t;return s((0,f.addEditorTab)(n,e,null!==(t=m[e])&&void 0!==t?t:""))}));const x=null!==(p=(0,Se.GA)(o.tabIdx))&&void 0!==p?p:0;if(s((0,f.updateActiveEditorTabIndex)(n,x)),i){const e=(0,C.C3)(i,o.variant);t.handleChapterSelect(i,e.variant),s((0,S.playgroundConfigLanguage)(e))}const b=Math.max((0,Se.GA)(o.exec||"1000")||1e3,1e3);b&&t.handleChangeExecTime(b)}}const _e=e=>{const{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:o}=(0,b.Fs)(),[d,v]=(0,u.useState)(),k=(0,m.TH)(),_=(0,m.s0)(),R=new URLSearchParams(k.search).get("add_device"),{editorTabs:I,editorSessionId:D,sessionDetails:P,execTime:U,isEditorAutorun:B,isRunning:V,isDebugging:O,output:G,replValue:z,usingSubst:$,isFolderModeEnabled:q,activeEditorTabIndex:Y,context:{chapter:Z,variant:J}}=(0,b.ix)((e=>e.workspaces[n])),K=(0,b.ix)((e=>e.fileSystem.inBrowserFileSystem)),{queryString:W,shortURL:X}=(0,b.ix)((e=>e.playground)),{sourceChapter:Q,sourceVariant:ee}=(0,b.ix)((e=>e.session)),te=(0,p.I0)(),{handleChangeExecTime:ne,handleChapterSelect:se,handleEditorValueChange:re,handleSetEditorBreakpoints:ae,handleReplEval:oe,handleReplOutputClear:ie,handleUsingSubst:le}=(0,u.useMemo)((()=>({handleChangeExecTime:e=>te((0,f.changeExecTime)(e,n)),handleChapterSelect:(e,t)=>te((0,f.chapterSelect)(e,t,n)),handleEditorValueChange:(e,t)=>te((0,f.updateEditorValue)(n,e,t)),handleSetEditorBreakpoints:(e,t)=>te((0,f.setEditorBreakpoint)(n,e,t)),handleReplEval:()=>te((0,f.evalRepl)(n)),handleReplOutputClear:()=>te((0,f.clearReplOutput)(n)),handleUsingSubst:e=>te((0,f.toggleUsingSubst)(e,n))})),[te,n]);R&&!d&&(v(R),_(k.pathname,{replace:!0}));const[ce,de]=(0,u.useState)(!1),{selectedTab:ue,setSelectedTab:he}=(0,x.__)(n,R?xe.B_.remoteExecution:xe.B_.introduction),[pe,me]=(0,u.useState)(!1),[be,ve]=(0,u.useState)((()=>{var e,t;return(0,je.wH)("playground",{editorValue:null!==(e=null===(t=I[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:Z})})),Se=(0,b.ix)((e=>!!e.session.remoteExecutionSession))&&!t,Ce=(0,b.ix)((e=>e.workspaces.playground.externalLibrary));(0,u.useEffect)((()=>{var e,t;ve((0,je.wH)("playground",{editorValue:null!==(e=null===(t=I[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:Z}))}),[D]);const _e=t?e.initialEditorValueHash:k.hash;(0,u.useEffect)((()=>{if(_e)ke(_e,{handleChangeExecTime:ne,handleChapterSelect:se},n,te,K);else if(Q&&ee){se(Q,ee);const e=(0,C.C3)(Q,ee);te((0,S.playgroundConfigLanguage)(e)),te((0,f.setFolderMode)(n,!1))}}),[te,K,_e,Q,ee,n,se,ne]),(0,u.useEffect)((()=>{ue&&(o&&Le.NG.includes(ue)?he(xe.B_.mobileEditor):!o&&Le.JN.includes(ue)&&he(xe.B_.introduction))}),[o,ue,he]);const Re=(0,u.useMemo)((()=>({goGreen:()=>de(!ce)})),[ce]),Ne=u.useCallback(((e,t)=>{re(e,t)}),[re]),Fe=(0,u.useCallback)((e=>{(0,je.cM)(be,e)}),[be]),Ie=(0,u.useMemo)((()=>({handleEditorEval:()=>te((0,f.evalEditor)(n)),handleInterruptEval:()=>te((0,g.beginInterruptExecution)(n)),handleToggleEditorAutorun:()=>te((0,f.toggleEditorAutorun)(n)),handleDebuggerPause:()=>te((0,g.beginDebuggerPause)(n)),handleDebuggerReset:()=>te((0,g.debuggerReset)(n)),handleDebuggerResume:()=>te((0,g.debuggerResume)(n))})),[te,n]),De=(0,b.ix)((e=>e.playground.languageConfig)),Pe=(0,u.useMemo)((()=>(0,N.jsx)(j.k,{isEntrypointFileDefined:null!==Y,isDebugging:O,isEditorAutorun:B,isRunning:V,autorunDisabled:Se,sourceChapter:De.chapter,pauseDisabled:Se||!(0,C.lq)(De.chapter),...Ie},"autorun")),[Y,O,B,V,De.chapter,Ie,Se]),Ue=(0,u.useCallback)(((e,t)=>{const{chapter:n,variant:s}=e;(n<=2&&pe||ue===xe.B_.substVisualizer)&&le(!0),n>2&&(ie(),le(!1));const r={time:Date.now(),type:"chapterSelect",data:n};Fe(r),se(n,s),te((0,S.playgroundConfigLanguage)(e))}),[te,pe,ue,Fe,ie,le,se]),Be=(0,u.useMemo)((()=>(0,N.jsx)(w.b,{handleChapterSelect:Ue,isFolderModeEnabled:q,sourceChapter:De.chapter,sourceVariant:De.variant,disabled:Se},"chapter")),[Ue,q,De.chapter,De.variant,Se]),Ve=(0,u.useMemo)((()=>ue===xe.B_.substVisualizer?null:(0,N.jsx)(L._,{handleReplOutputClear:ie},"clear_repl")),[ie,ue]),Me=(0,u.useMemo)((()=>ue===xe.B_.substVisualizer?null:(0,N.jsx)(T.e,{handleReplEval:oe,isRunning:V},"eval_repl")),[oe,V,ue]),Ae=(0,u.useMemo)((()=>(0,N.jsx)(F,{execTime:U,handleChangeExecTime:ne},"execution_time")),[U,ne]),He=(0,u.useMemo)((()=>{const n=t?M.y.playground+"#"+e.initialEditorValueHash:W;return(0,N.jsx)(A,{handleGenerateLz:()=>te((0,S.generateLzString)()),handleShortenURL:e=>te((0,S.shortenURL)(e)),handleUpdateShortURL:e=>te((0,S.updateShortURL)(e)),queryString:n,shortURL:X,isSicp:t},"share")}),[te,t,e.initialEditorValueHash,W,X]);(0,u.useEffect)((()=>{const e=(0,C.C3)(Z,J);te((0,S.playgroundConfigLanguage)(e))}),[te,Z,J]);const Oe=(0,u.useMemo)((()=>(0,Le.EG)(fe(De))),[De]),Ge=(0,u.useMemo)((()=>[Oe]),[Oe]),ze=[...Ge].filter((({id:e})=>!(e&&Le.NG.includes(e)))),$e=(0,u.useCallback)((t=>{const n=()=>{t.getSession().addFold("    ",new a.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)}),[e.prependLength]),qe=(0,u.useCallback)(((e,t)=>{const s={time:Date.now(),type:"codeDelta",data:t};Fe(s),te((0,f.toggleUpdateCse)(!0,n)),te((0,f.setEditorHighlightedLines)(n,0,[]))}),[Fe,te,n]),Ye=(0,u.useCallback)((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};Fe(t)}),[Fe]),Ze=(0,u.useCallback)((e=>{const t=e.getRange(),n=e.isBackwards();if(!(0,c.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}};Fe(e)}}),[Fe]),Je=(0,u.useCallback)(((e,t)=>{const s=t.filter((e=>!!e)).length;s>0&&(me(!0),Z<=2&&le(!0)),0===s&&(me(!1),ue!==xe.B_.substVisualizer&&(ie(),le(!1))),ae(e,t),te((0,f.toggleUpdateCse)(!0,n))}),[ue,te,n,ae,ie,le,Z]),Ke=!De.supports.repl||Se,We=(0,u.useMemo)((()=>({handleDeclarationNavigate:e=>te((0,f.navigateToDeclaration)(n,e)),handlePromptAutocomplete:(e,t,s)=>te((0,f.promptAutocomplete)(n,e,t,s)),handleSendReplInputToOutput:e=>te((0,f.sendReplInputToOutput)(e,n)),setActiveEditorTabIndex:e=>te((0,f.updateActiveEditorTabIndex)(n,e)),removeEditorTabByIndex:e=>te((0,f.removeEditorTab)(n,e))})),[te,n]),Xe={editorSessionId:D,sessionDetails:P,isEditorAutorun:B,editorVariant:"normal",baseFilePath:we.z[n],isFolderModeEnabled:q,activeEditorTabIndex:Y,setActiveEditorTabIndex:We.setActiveEditorTabIndex,removeEditorTabByIndex:We.removeEditorTabByIndex,editorTabs:I.map(H.F),handleDeclarationNavigate:We.handleDeclarationNavigate,handleEditorEval:Ie.handleEditorEval,handlePromptAutocomplete:We.handlePromptAutocomplete,handleSendReplInputToOutput:We.handleSendReplInputToOutput,onChange:qe,onCursorChange:Ye,onSelectionChange:Ze,onLoad:t&&e.prependLength?$e:void 0,sourceChapter:De.chapter,externalLibraryName:Ce,sourceVariant:De.variant,handleEditorValueChange:Ne,handleEditorUpdateBreakpoints:Je},Qe=(0,u.useMemo)((()=>({handleBrowseHistoryDown:()=>te((0,f.browseReplHistoryDown)(n)),handleBrowseHistoryUp:()=>te((0,f.browseReplHistoryUp)(n)),handleReplValueChange:e=>te((0,f.updateReplValue)(e,n))})),[te,n]),et={output:G,replValue:z,handleReplEval:oe,usingSubst:$,handleBrowseHistoryDown:Qe.handleBrowseHistoryDown,handleBrowseHistoryUp:Qe.handleBrowseHistoryUp,handleReplValueChange:Qe.handleReplValueChange,sourceChapter:De.chapter,sourceVariant:De.variant,externalLibrary:E.L.NONE,hidden:ue===xe.B_.substVisualizer||ue===xe.B_.cseMachine,inputHidden:Ke,replButtons:[Ke?null:Me,Ve],disableScrolling:t},tt=(0,u.useMemo)((()=>({tabs:[...q?[{label:"Folder",body:(0,N.jsx)(ge,{workspaceLocation:"playground",basePath:we.z[n]}),iconName:r.d.FOLDER_CLOSE,id:xe.B_.folder}]:[]]})),[q,n]),nt={controlBarProps:{editorButtons:[Pe,De.chapter===l.Chapter.FULL_JS?null:He,Be,Ae]},editorContainerProps:Xe,handleSideContentHeightChange:(0,u.useCallback)((e=>te((0,y.changeSideContentHeight)(e,n))),[te,n]),replProps:et,sideBarProps:tt,sideContentProps:{selectedTabId:ue,tabs:{beforeDynamicTabs:Ge,afterDynamicTabs:[]},workspaceLocation:n},sideContentIsResizeable:ue!==xe.B_.substVisualizer&&ue!==xe.B_.cseMachine},st={editorContainerProps:Xe,replProps:et,sideBarProps:tt,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[Pe,Be,De.chapter===l.Chapter.FULL_JS?null:He]},selectedTabId:ue,onChange:he,tabs:{beforeDynamicTabs:ze,afterDynamicTabs:[]},workspaceLocation:n}};return o?(0,N.jsx)("div",{className:i()("Playground",s.Pyr,ce&&"GreenScreen"),children:(0,N.jsx)(ye.Z,{...st})}):(0,N.jsx)(h.HotKeys,{className:i()("Playground",s.Pyr,ce&&"GreenScreen"),keyMap:Te,handlers:Re,children:(0,N.jsx)(Ee.Z,{...nt})})},Re=_e;Re.displayName="Playground";const Ne=_e}}]);
//# sourceMappingURL=22122.d7e2f24f.chunk.js.map